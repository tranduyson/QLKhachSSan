<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D·ªãch V·ª• - Hotel Management</title>
    <!-- Replaced inline styles with common.css -->
    <link rel="stylesheet" href="css/common.css">
</head>
<body>
    <div class="sidebar">
        <div class="logo">
            <span>üè®</span>
            <div>
                <h1>HOTEL</h1>
                <div class="logo-subtitle">Qu·∫£n L√Ω Kh√°ch S·∫°n</div>
            </div>
        </div>
        <div class="menu">
            
            <a href="management.html" class="menu-item">
                <span>üè†</span>
                <span>Trang ch·ªß</span>
            </a>
            <a href="Phong.html" class="menu-item">
                <span>üö™</span>
                <span>Qu·∫£n L√Ω Ph√≤ng</span>
            </a>
            <a href="Gia.html" class="menu-item">
                <span>üí∞</span>
                <span>Qu·∫£n L√Ω Gi√°</span>
            </a>
            <a href="LoaiPhong.html" class="menu-item">
                <span>üè∑Ô∏è</span>
                <span>Lo·∫°i Ph√≤ng</span>
            </a>
            <a href="booking.html" class="menu-item ">
                <span>üìÖ</span>
                <span>ƒê·∫∑t ph√≤ng</span>
            </a>
            <a href="thanhtoan.html" class="menu-item">
                <span>üí≥</span>
                <span>Thanh to√°n</span>
            </a>
            <a href="checkinout.html" class="menu-item ">
                <span>‚úÖ</span>
                <span>Check In/Out</span>
            </a>
            <a href="dichvu.html" class="menu-item active">
                <span>üõéÔ∏è</span>
                <span>D·ªãch V·ª•</span>
            </a>
            <a href="hoadon.html" class="menu-item">
                <span>üí∞</span>
                <span>H√≥a ƒê∆°n</span>
            </a>
            <a href="users.html" class="menu-item">
                <span>üë•</span>
                <span>Qu·∫£n l√Ω ng∆∞·ªùi d√πng</span>
            </a>
            <a href="baocao.html" class="menu-item " >
                <span>üìä</span>
                <span>B√°o C√°o</span>
            </a>
        </div>
    </div>

    <div class="main-content">
        <div class="top-bar">
            <h2 id="pageTitle">Trang Ch·ªß</h2>
            <div class="user-dropdown">
                <div class="user-info" id="userInfoTrigger">
                    <span id="userNameDisplay" class="user-name">Admin</span>
                    <div class="user-avatar" id="userAvatar">A</div>
                </div>
                <div class="dropdown-menu" id="userDropdown">
                    <div class="dropdown-header">
                        <div class="user-avatar-large" id="dropdownAvatar">A</div>
                        <div>
                            <div class="dropdown-user-name" id="dropdownUserName">Admin</div>
                            <div class="dropdown-user-role" id="dropdownUserRole">Qu·∫£n tr·ªã vi√™n</div>
                        </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a href="profile.html" class="dropdown-item"><span>üë§</span> H·ªì s∆° c√° nh√¢n</a>
                    <a href="#" class="dropdown-item text-danger" onclick="logout()"><span>üö™</span> ƒêƒÉng xu·∫•t</a>
                </div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('list')">Danh S√°ch D·ªãch V·ª•</button>
            <button class="tab-btn" onclick="switchTab('usage')">S·ª≠ D·ª•ng D·ªãch V·ª•</button>
        </div>

        <!-- Tab: Danh s√°ch d·ªãch v·ª• -->
        <div class="content-card" id="listTab">
            <div class="action-bar" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3>Danh s√°ch d·ªãch v·ª•</h3>
                <button class="btn btn-primary" onclick="openAddModal()">Th√™m D·ªãch V·ª•</button>
            </div>
            <div class="service-grid" id="serviceGrid">
                <div class="empty-state">
                    <div class="empty-state-icon">üìã</div>
                    <p>ƒêang t·∫£i danh s√°ch d·ªãch v·ª•...</p>
                </div>
            </div>
        </div>

        <!-- Tab: S·ª≠ d·ª•ng d·ªãch v·ª• -->
        <div class="content-card" id="usageTab" style="display: none;">
            <h3>Ghi nh·∫≠n s·ª≠ d·ª•ng d·ªãch v·ª•</h3>
            
            <div id="alertContainer"></div>

            <div class="booking-select" style="margin-bottom: 20px;">
                <label style="font-weight: bold; display: block; margin-bottom: 8px;">Ch·ªçn ƒë·∫∑t ph√≤ng:</label>
                <select id="bookingSelect" onchange="loadBookingServices()" class="form-group" style="width: 100%; padding: 12px;">
                    <option value="">-- Ch·ªçn booking --</option>
                </select>
            </div>

            <div id="selectedBookingInfo" class="info-box" style="display: none;"></div>
            
            <div id="serviceUsageList"></div>
            
            <div id="summarySection" style="display: none;"></div>

            <button class="btn btn-primary" onclick="openAddServiceModal()" id="addServiceBtn" style="display: none; margin-top: 15px;">
                ‚ûï Th√™m D·ªãch V·ª•
            </button>
        </div>
    </div>

    <!-- Modal: Th√™m/S·ª≠a D·ªãch V·ª• -->
    <div id="serviceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Th√™m D·ªãch V·ª•</h2>
                <button class="close-btn" onclick="closeModal('serviceModal')">√ó</button>
            </div>
            <form id="serviceForm" onsubmit="saveService(event)">
                <input type="hidden" id="serviceId">
                <div class="form-group">
                    <label>M√£ d·ªãch v·ª• (VD: SPA) *</label>
                    <input type="text" id="serviceMa" placeholder="VD: TOUR-BEACH" required>
                </div>
                <div class="form-group">
                    <label>T√™n d·ªãch v·ª• *</label>
                    <input type="text" id="serviceTen" placeholder="VD: Tour bi·ªÉn c·∫£ ng√†y" required>
                </div>
                <div class="form-group">
                    <label>ƒê∆°n gi√° (VNƒê) *</label>
                    <input type="number" id="serviceDonGia" min="0" placeholder="1200000" required>
                </div>
                <div class="form-group">
                    <label>Thu·∫ø (%) *</label>
                    <input type="number" id="serviceThue" min="0" max="100" value="10" required>
                </div>
                <button type="submit" class="btn btn-success" style="width: 100%;">L∆∞u D·ªãch V·ª•</button>
            </form>
        </div>
    </div>

    <!-- Modal: Th√™m D·ªãch V·ª• Cho Booking -->
    <div id="addServiceUsageModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Th√™m D·ªãch V·ª• Cho Kh√°ch</h2>
                <button class="close-btn" onclick="closeModal('addServiceUsageModal')">√ó</button>
            </div>
            <form id="serviceUsageForm" onsubmit="addServiceToBooking(event)">
                <div class="form-group">
                    <label>Ch·ªçn d·ªãch v·ª• *</label>
                    <select id="usageServiceId" required onchange="updateServicePreview()">
                        <option value="">-- Ch·ªçn d·ªãch v·ª• --</option>
                    </select>
                </div>
                <div id="servicePreview" class="info-box" style="display: none;"></div>
                <div class="form-group">
                    <label>S·ªë l∆∞·ª£ng *</label>
                    <input type="number" id="usageQuantity" min="1" value="1" required onchange="updateServicePreview()">
                </div>
                <div class="form-group">
                    <label>Ghi ch√∫ (t√πy ch·ªçn)</label>
                    <input type="text" id="usageNote" placeholder="VD: Kh√¥ng ƒë√°">
                </div>
                <button type="submit" class="btn btn-success" id="submitServiceBtn" style="width: 100%;">X√°c Nh·∫≠n Th√™m</button>
            </form>
        </div>
    </div>
    <script src="js/Auth.js"></script>
     <script src="js/Auth.js"></script>
    <script src="js/dichvu.js"></script>
</body>
</html>
